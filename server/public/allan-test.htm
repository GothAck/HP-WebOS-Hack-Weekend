<html>
<head>
    <title>Canvas tutorial</title>
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    
    <script type="text/javascript" src="javascripts/camcanvas.js"></script>
    <script type="text/javascript" src="javascripts/barcode.js"></script>
    
    <script type="application/x-javascript">

        function draw() {
            var canvas = document.getElementById("barcode_canvas");
            if (canvas.getContext) {
                var c = canvas.getContext("2d");
                var i = new Image();
                i.onload = function() {
                    c.drawImage(i, 0, 0);
                }
                //i.src = "barcode_test_1.png";
                i.src = "5099750442227_5.png";
                //i.src = "5099750442227.png";
            }
        }
        
        function read() {
            var canvas = document.getElementById("barcode_canvas");
            if (canvas.getContext) {
                var c = canvas.getContext("2d");
                read_barcode(c);
            }
        }
    </script>
    
    <style type="text/css">
        barcode_canvas { border: 1px dashed red; }
    </style>
</head>
<body onLoad="draw();">
<!--
	<object width="320" height="240" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="iembedflash">
  		<param value="camcanvas.swf" name="movie">
  		<param value="high" name="quality">
		<param value="always" name="allowScriptAccess">
  		<embed width="320" height="240" mayscript="true" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" quality="high" src="camcanvas.swf" id="embedflash" allowscriptaccess="always">
	</object>
<input type="button" onclick="capture_timer(); $('#iembedflash').addClass('hidden'); $('webcam-target').removeClass('hidden');" value="Capture"/>
    
    <div class="webcam-target hidden" style="margin-top:1em;-moz-border-radius:12px; background-color:#ddd;width:360px;text-align:center;height:260px;padding-top:15px;;">
        <canvas  id="canvas" width="320" height="240"></canvas>
    </div>

    <script type="text/javascript">
    // onload initCanvas(320,240);
    function capture_timer() {
        setTimeout('captureToCanvas(); capture_timer();',500);
    }
    
    </script>
-->
    <canvas id="barcode_canvas" width="500" height="300" onclick="read();"></canvas>
</body>
</html>
